[gd_scene load_steps=36 format=3 uid="uid://dw10ttlacgs7p"]

[ext_resource type="Script" uid="uid://b48hcdcx8481n" path="res://scripts/game_manager.gd" id="1_nmy2v"]
[ext_resource type="Texture2D" uid="uid://csy12muneeb4r" path="res://Assets/sprites/world_tileset.png" id="2_fppsr"]
[ext_resource type="PackedScene" uid="uid://bvhthmlt4rnet" path="res://sceans/platform.tscn" id="3_f8mor"]
[ext_resource type="PackedScene" uid="uid://l7jl70pg5j0" path="res://sceans/coin.tscn" id="4_1g8wf"]
[ext_resource type="PackedScene" uid="uid://bodgy4srcmhcu" path="res://sceans/kill_zone.tscn" id="5_ct2aj"]
[ext_resource type="PackedScene" uid="uid://co2rs2s3vwj1k" path="res://sceans/enemy.tscn" id="6_aguan"]
[ext_resource type="Script" uid="uid://lvllo84jji7u" path="res://scripts/world_border.gd" id="6_n4vha"]
[ext_resource type="PackedScene" uid="uid://b6n54q7s7eu6" path="res://sceans/player.tscn" id="7_nmy2v"]
[ext_resource type="FontFile" uid="uid://n8acw1tjam4p" path="res://Assets/fonts/PixelOperator8.ttf" id="8_4i3d2"]
[ext_resource type="Script" uid="uid://b6gn20xiu5ego" path="res://scripts/player.gd" id="8_oflin"]
[ext_resource type="PackedScene" uid="uid://cc48g06d5ej7s" path="res://sceans/trollplatform.tscn" id="10_oflin"]
[ext_resource type="PackedScene" uid="uid://cjek6nqklhelu" path="res://sceans/Interactions.tscn" id="11_djvpa"]
[ext_resource type="PackedScene" uid="uid://c4g41oqekj74b" path="res://sceans/coin_UI.tscn" id="11_pmv1k"]
[ext_resource type="FontFile" uid="uid://cmav3nbk7j58m" path="res://Assets/fonts/PixelOperator8-Bold.ttf" id="11_sreem"]
[ext_resource type="Script" uid="uid://lnrjc434m00u" path="res://scripts/uimanager.gd" id="12_4s3r4"]
[ext_resource type="Texture2D" uid="uid://brd68srlaw20o" path="res://Assets/sprites/Heart.png" id="13_n4vha"]
[ext_resource type="Texture2D" uid="uid://bnqppjk4bp0oh" path="res://Assets/sprites/knight died.png" id="13_p70jd"]
[ext_resource type="Script" uid="uid://dg1toj1unac0i" path="res://scripts/heart_ui.gd" id="14_nkedh"]
[ext_resource type="PackedScene" uid="uid://be5jppitskypi" path="res://sceans/Pickable_Item.tscn" id="16_gx5sb"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_f8mor"]
texture = ExtResource("2_fppsr")
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:0/0 = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:0/0 = 0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:0/0 = 0
5:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:0/0 = 0
6:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:0/0 = 0
7:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
8:0/0 = 0
8:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
9:0/0 = 0
9:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -6.26514, 8, 0.245692, -8, -0.859921)
10:0/0 = 0
10:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -6.26514, 8, -6.1423, 8, 0.982767, -8, 0.859921)
11:0/0 = 0
11:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -6.1423, 8, -8, 8, -0.491384, -8, 0.122846)
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:1/0 = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:1/0 = 0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:1/0 = 0
4:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:1/0 = 0
5:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:1/0 = 0
6:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:1/0 = 0
7:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
8:1/0 = 0
8:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
9:1/0 = 0
9:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -6.26514, 8, 0.245692, -8, -0.859921)
10:1/0 = 0
10:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -6.26514, 8, -6.1423, 8, 0.982767, -8, 0.859921)
11:1/0 = 0
11:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -6.1423, 8, -8, 8, -0.491384, -8, 0.122846)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:2/0 = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:2/0 = 0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:2/0 = 0
4:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:2/0 = 0
5:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
6:2/0 = 0
6:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:2/0 = 0
7:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
8:2/0 = 0
8:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
9:2/0 = 0
9:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -6.26514, 8, 0.245692, -8, -0.859921)
10:2/0 = 0
10:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -6.26514, 8, -6.1423, 8, 0.982767, -8, 0.859921)
11:2/0 = 0
11:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -6.1423, 8, -8, 8, -0.491384, -8, 0.122846)
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
2:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
7:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
8:3/0 = 0
9:3/0 = 0
0:4/0 = 0
1:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
7:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
8:4/0 = 0
9:4/0 = 0
0:5/0 = 0
1:5/0 = 0
5:5/0 = 0
6:5/0 = 0
7:5/0 = 0
8:5/0 = 0
1:6/0 = 0
5:6/0 = 0
6:6/0 = 0
7:6/0 = 0
8:6/0 = 0
0:7/0 = 0
1:7/0 = 0
3:7/0 = 0
5:7/0 = 0
6:7/0 = 0
7:7/0 = 0
8:7/0 = 0
0:8/0 = 0
1:8/0 = 0
2:8/0 = 0
3:8/0 = 0
4:8/0 = 0
5:8/0 = 0
6:8/0 = 0
7:8/0 = 0
8:8/0 = 0
0:9/0 = 0
1:9/0 = 0
2:9/0 = 0
3:9/0 = 0
4:9/0 = 0
5:9/0 = 0
6:9/0 = 0
7:9/0 = 0
0:10/0 = 0
1:10/0 = 0
2:10/0 = 0
3:10/0 = 0
4:10/0 = 0
6:10/0 = 0
0:11/0 = 0
1:11/0 = 0
2:11/0 = 0
3:11/0 = 0
4:11/0 = 0
5:11/0 = 0
0:12/0 = 0
1:12/0 = 0
2:12/0 = 0
3:12/0 = 0
4:12/0 = 0
0:13/0 = 0
1:13/0 = 0
2:13/0 = 0
3:13/0 = 0
4:13/0 = 0
5:13/0 = 0
0:14/0 = 0
1:14/0 = 0
2:14/0 = 0
3:14/0 = 0
4:14/0 = 0
0:15/0 = 0
1:15/0 = 0
2:15/0 = 0
3:15/0 = 0
2:4/size_in_atlas = Vector2i(3, 3)
2:4/0 = 0

[sub_resource type="TileSet" id="TileSet_1g8wf"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_f8mor")

[sub_resource type="Animation" id="Animation_f8mor"]
resource_name = "Move"
length = 2.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.96667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(168.83, -78.07), Vector2(263.335, 5)]
}

[sub_resource type="Animation" id="Animation_1g8wf"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(176, 5)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ct2aj"]
_data = {
&"Move": SubResource("Animation_f8mor"),
&"RESET": SubResource("Animation_1g8wf")
}

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_aguan"]
distance = -20.0

[sub_resource type="AtlasTexture" id="AtlasTexture_mtak7"]
atlas = ExtResource("13_p70jd")
region = Rect2(0, 0, 49, 49)

[sub_resource type="AtlasTexture" id="AtlasTexture_nkedh"]
atlas = ExtResource("13_n4vha")
region = Rect2(455, 0, 65, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_p70jd"]
atlas = ExtResource("13_n4vha")
region = Rect2(390, 0, 65, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_38v6o"]
atlas = ExtResource("13_n4vha")
region = Rect2(325, 0, 65, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_k16n7"]
atlas = ExtResource("13_n4vha")
region = Rect2(260, 0, 65, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_2ntpp"]
atlas = ExtResource("13_n4vha")
region = Rect2(195, 0, 65, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_5uqqp"]
atlas = ExtResource("13_n4vha")
region = Rect2(130, 0, 65, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_yyl76"]
atlas = ExtResource("13_n4vha")
region = Rect2(65, 0, 65, 65)

[sub_resource type="AtlasTexture" id="AtlasTexture_xb2j6"]
atlas = ExtResource("13_n4vha")
region = Rect2(0, 0, 65, 65)

[sub_resource type="SpriteFrames" id="SpriteFrames_mtak7"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mtak7")
}],
"loop": true,
"name": &"dead",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nkedh")
}],
"loop": true,
"name": &"full",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_p70jd")
}],
"loop": true,
"name": &"full-1",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_38v6o")
}],
"loop": true,
"name": &"full-2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_k16n7")
}],
"loop": true,
"name": &"full-3",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2ntpp")
}],
"loop": true,
"name": &"full-4",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_5uqqp")
}],
"loop": true,
"name": &"full-5",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yyl76")
}],
"loop": true,
"name": &"full-6",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xb2j6")
}],
"loop": true,
"name": &"full-7",
"speed": 5.0
}]

[node name="Game" type="Node2D"]
position = Vector2(24, -17)

[node name="GameManager" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("1_nmy2v")

[node name="Coin" parent="." instance=ExtResource("4_1g8wf")]
position = Vector2(23, -41)

[node name="Map" type="TileMap" parent="."]
tile_set = SubResource("TileSet_1g8wf")
format = 2
layer_0/tile_data = PackedInt32Array(65531, 0, 0, 65532, 0, 0, 65533, 0, 0, 65534, 0, 0, 65535, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 3, 0, 0, 7, 0, 0, 8, 0, 0, 9, 0, 0, 4, 589824, 0, 5, 655360, 0, 6, 720896, 0, -65532, 0, 1, -65529, 262144, 1, 65530, 131072, 2, 65529, 131072, 2, 65528, 131072, 2, 65527, 131072, 2, 65526, 131072, 2, 65525, 131072, 2, 65524, 131072, 2, 65523, 131072, 2, 65522, 131072, 2, 65521, 131072, 2, 65520, 131072, 2, 65519, 131072, 2, 65518, 131072, 2, 65517, 131072, 2, 65516, 131072, 2, 65515, 131072, 2, 65514, 131072, 2, 65513, 131072, 2, 65512, 131072, 2, 65511, 131072, 2, 65510, 131072, 2, 65509, 131072, 2, 65508, 131072, 2, 65507, 131072, 2, 65506, 131072, 2)

[node name="OneWay Platform" parent="." instance=ExtResource("3_f8mor")]
position = Vector2(23, -31)

[node name="Moving Platform" parent="." instance=ExtResource("3_f8mor")]
position = Vector2(176, 5)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Moving Platform"]
libraries = {
&"": SubResource("AnimationLibrary_ct2aj")
}
autoplay = "Move"

[node name="Worldborder" parent="." instance=ExtResource("5_ct2aj")]
position = Vector2(-45, -7)
script = ExtResource("6_n4vha")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Worldborder"]
position = Vector2(-77, 93.17)
shape = SubResource("WorldBoundaryShape2D_aguan")

[node name="Enemy" parent="." instance=ExtResource("6_aguan")]
position = Vector2(93, -12)

[node name="player" parent="." groups=["Player"] instance=ExtResource("7_nmy2v")]
position = Vector2(-24, -11)
collision_layer = 2
collision_mask = 253
script = ExtResource("8_oflin")

[node name="Camera2D" type="Camera2D" parent="player"]
position = Vector2(0, -7)
zoom = Vector2(2.5, 2.5)
limit_bottom = 120
position_smoothing_enabled = true
position_smoothing_speed = 4.0

[node name="UIHUD" type="CanvasLayer" parent="."]
offset = Vector2(70, 35)
scale = Vector2(2.145, 2.145)
transform = Transform2D(2.145, 0, 0, 2.145, 70, 35)
script = ExtResource("12_4s3r4")

[node name="CoinsUI" type="Control" parent="UIHUD"]
layout_mode = 3
anchor_left = 0.329
anchor_right = 0.432
anchor_bottom = 0.068
offset_left = 75.73
offset_top = -1.795
offset_right = -7.92496
offset_bottom = 33.84
grow_horizontal = 0

[node name="ScoreContainer" type="BoxContainer" parent="UIHUD/CoinsUI"]
layout_mode = 1
offset_right = 40.0
offset_bottom = 40.0
alignment = 1

[node name="Coin" parent="UIHUD/CoinsUI/ScoreContainer" instance=ExtResource("11_pmv1k")]
position = Vector2(-19, 5)

[node name="Score" type="Label" parent="UIHUD/CoinsUI/ScoreContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("11_sreem")
theme_override_font_sizes/font_size = 24
text = "0"

[node name="HealthHUD" type="Control" parent="UIHUD"]
layout_mode = 3
anchor_left = -0.19051
anchor_top = -1.08024e-05
anchor_right = -0.19051
anchor_bottom = 0.0107917
offset_left = 252.725
offset_top = 22.892
offset_right = 535.057
offset_bottom = 46.912
metadata/_edit_use_anchors_ = true

[node name="heartUI" type="AnimatedSprite2D" parent="UIHUD/HealthHUD"]
position = Vector2(-6.75526, -9.59955)
scale = Vector2(0.688612, 0.688612)
sprite_frames = SubResource("SpriteFrames_mtak7")
animation = &"full"
offset = Vector2(-42.645, -12.045)
script = ExtResource("14_nkedh")

[node name="Name" type="Label" parent="UIHUD/HealthHUD"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.126607
anchor_top = 1.19127
anchor_right = 0.243491
anchor_bottom = 1.44917
offset_left = -49.422
offset_top = -66.365
offset_right = -16.422
offset_bottom = -58.365
theme_override_fonts/font = ExtResource("8_4i3d2")
theme_override_font_sizes/font_size = 16
text = "Xelmi"
metadata/_edit_use_anchors_ = true

[node name="HealthBarContainer" type="ColorRect" parent="UIHUD/HealthHUD"]
layout_mode = 0
offset_left = -13.0
offset_top = -11.0
offset_right = 137.0
offset_bottom = -3.0
color = Color(0.281627, 0.446589, 0.44866, 1)
metadata/_edit_use_anchors_ = true

[node name="HealthBarFill" type="ColorRect" parent="UIHUD/HealthHUD/HealthBarContainer"]
layout_mode = 0
offset_right = 150.0
offset_bottom = 8.0
color = Color(1, 0.184314, 0, 1)
metadata/_edit_use_anchors_ = true

[node name="TrollPlatform" parent="." instance=ExtResource("10_oflin")]
position = Vector2(180, 15)
moving_speed = 5000.0
max_position_x = 225.0

[node name="Interaction" parent="." instance=ExtResource("11_djvpa")]
position = Vector2(-187, -8)

[node name="PickableItem" parent="." instance=ExtResource("16_gx5sb")]
position = Vector2(-120, -8)
